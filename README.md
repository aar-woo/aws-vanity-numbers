# aws-vanity-numbers
An AWS project that converts a user's phone number into vanity numbers.

Call testing:
  Amazon Connect Phone Number: +1 833-770-0599

1. Record your reasons for implementing the solution the way you did, struggles you faced and problems you overcame.

For this project I created modules with seperation of concerns in mind. The convert-number.js file handles parsing and converting the user's phone number into vanity numbers. The conver-number.js file has multiple functions that I opted to leave written within this module since those functions are only used within this module to assist in the main purpose of the module, converting to vanity numbers. The insert-vanity-numbers.js file handles updating or inserting an item into a Dynamo DB table and top-three-to-string.js file handles taking the top three vanity numbers and creating a string for the AWS connect operator to read back to the user. The index.js file is where the actual handler function is defined and the code that runs and calls functions from other modules when there is a Lambda invocation. The create-table.js file was for creating a local Dynamo DB table for testing.

There were definitely struggles along the way, one instance was when I was tyring to figure out how to insert into a Dynamo DB table from a Lambda function. I started off by reading documentation and googling and just trying things out and this didn't work out for a while so I pulled myself out of trying to solve it within the context of this project. Instead, I took the time to follow a simple tutorial using Lambda and Dynamo DB that the AWS documentation provides. This allowed me to get more initial exposure and familiarity working with the two technologies. This then helped me understand documentation better and eventually helped me to figure it out in my own implementation. Another problem I will mention is when I was invoking my Lambda function within the contact flow, it would always end up in the error route. Testing my function in the Lambda console gave no errors in the logs and so I went to Google. I Googled something similar to "aws connect lambda function errors" and was able to find a really helpful aws article that pointed out the output of the Lambda function should be a "flat object of key-value pairs." This is when I realized my Lambda function was returning an object with a nested array. After removing this nested array I now had a flat object which fixed the error and the contact flow now worked and ran the success route.

2. What shortcuts did you take that would be a bad practice in production?

Using deeply nested loops, in the convert-number.js file is bad in production since this can result in a large amount of iterations and may cause for slower performance. I actually wanted to include seven letter words in the vanity number options when possible but the loops were too deeply nested and the amount of iterations to run took up too much time and I'm not sure if the loops would have finished in the 8 second timeout window. Another shortcut I took was not checking the Dynamo DB table if the caller's phone number already exists within it, which would allow the application to return the existing vanity numbers for that phone number rather than converting the phone number into vanity numbers again, and updating the item needlessly.

3. What would you have done with more time?

With more time I would first address the above two shortcuts. I would want to create a recursive function for creating combinations of letters for the vanity words. Creating a recursive function would also allow the application to be more efficient and be able to find potential seven letter vanity numbers rather than just combinations of three and four letters words. I would add code that prioritizes adding seven letter vanity numbers first, considering those as the best. I would also want to add error handling and a more comprehensive contact flow that would give user's more information. An example of this would be if a caller's number contains a '0' or a '1', then Amazon Connect would play a prompt letting the caller know their number could not be converted because it contains a '0' or '1'.
